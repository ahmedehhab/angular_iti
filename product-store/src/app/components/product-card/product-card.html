<div class="card h-100 cursor-pointer" (click)="goToDetails()">
    <img [src]="product.thumbnail" [alt]="product.title" class="card-img-top">

    <div class="card-body d-flex flex-column">
        <h6 class="card-title fw-bold text-truncate" [title]="product.title">
            {{ product.title }}
        </h6>

        <div class="mb-2">
            <span class="badge bg-secondary">{{ product.category }}</span>
        </div>

        <div class="mb-2">
            @if (product.discountPercentage > 0) {
            <span class="price-original me-2">{{ product.price | egp }}</span>
            <span class="price-discounted">{{ product.price | discount:product.discountPercentage | egp }}</span>
            <span class="badge bg-danger ms-1">-{{ product.discountPercentage | number:'1.0-0' }}%</span>
            } @else {
            <span class="fw-bold text-primary">{{ product.price | egp }}</span>
            }
        </div>

        <div class="mb-3">
            @if (product.stock > 0) {
            <span class="stock-in">
                <i class="bi bi-check-circle-fill me-1"></i>In stock ({{ product.stock }})
            </span>
            } @else {
            <span class="stock-out">
                <i class="bi bi-x-circle-fill me-1"></i>Out of stock
            </span>
            }
        </div>

        <div class="mt-auto">
            <button class="btn btn-primary w-100" [disabled]="product.stock === 0" (click)="addToCart($event)">
                <i class="bi bi-cart-plus me-1"></i>Add to Cart
            </button>
        </div>
    </div>
</div>